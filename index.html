<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IP Info + Trust Score</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #fff;
    }
    .info {
      margin: 8px;
      font-size: 18px;
    }
    button {
      width: 80%;
      max-width: 300px;
      padding: 16px;
      margin: 10px 0;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      background: #007aff;
      color: white;
    }
  </style>
</head>
<body>
  <div class="info" id="ip">IP: …</div>
  <div class="info" id="location">Ort: …</div>
  <div class="info" id="coords">Lat/Long: …</div>
  <div class="info" id="trust">Trust‑/Risk Score: …</div>

  <button id="copyLat">Latitude kopieren</button>
  <button id="copyLong">Longitude kopieren</button>

  <script>
    let lat, lon;

    // 1) IP + Geo + Reputation über APIVoid
    async function fetchIpInfo() {
      try {
        const res = await fetch('https://api.apivoid.com/v2/ip-reputation', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-API-Key': 'DEIN_API_KEY_HIER'
          },
          body: JSON.stringify({ ip: 'check' })
        });
        const data = await res.json();

        const ip = data.ip;
        const info = data.information || {};
        const latitude = info.latitude;
        const longitude = info.longitude;
        const city = info.city_name;
        const country = info.country_name;
        const risk = data.risk_score?.result;

        lat = latitude;
        lon = longitude;

        document.getElementById('ip').textContent = 'IP: ' + ip;
        document.getElementById('location').textContent = `Ort: ${city || '?'} — ${country || '?'}`;
        document.getElementById('coords').textContent = `Lat / Long: ${latitude}, ${longitude}`;
        document.getElementById('trust').textContent = 'Trust / Risk Score: ' + (risk !== undefined ? risk + ' / 100' : 'n/a');

      } catch (err) {
        console.error('Fehler bei API:', err);
        document.getElementById('trust').textContent = 'Fehler beim Laden der Trust‑Daten';
      }
    }

    function copy(text) {
      if (!text) return;
      navigator.clipboard.writeText(text.toString());
    }

    document.getElementById('copyLat').addEventListener('click', () => {
      copy(lat);
    });
    document.getElementById('copyLong').addEventListener('click', () => {
      copy(lon);
    });

    fetchIpInfo();
  </script>
</body>
</html>
